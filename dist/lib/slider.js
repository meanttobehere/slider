!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("slider",[],e):"object"==typeof exports?exports.slider=e():t.slider=e()}(self,(function(){return(()=>{"use strict";var t={};(t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})})(t);var e={isVertical:!1,isRange:!0,shouldDisplayTips:!0,shouldDisplayProgressBar:!0,shouldDisplayScale:!1,minValue:0,maxValue:100,step:1,pointerPosition:20,secondPointerPosition:80};const n=function(){function t(t,e,n){var i=this;this.handleObjectMouseMove=function(t){var e=i.calcDistanceInPercent(t.clientX-i.offsetX,t.clientY-i.offsetY);i.observer.move(e,i.isSecond)},this.handleObjectMouseUp=function(){$(document).off("mousemove",i.handleObjectMouseMove),i.observer.endMove(i.isSecond)},this.handleObjectMouseDown=function(t){$(document).on("mousemove",i.handleObjectMouseMove),$(document).one("mouseup",i.handleObjectMouseUp),i.offsetX=t.offsetX,i.offsetY=t.offsetY,i.observer.startMove(i.isSecond)},this.handleObjectTouchMove=function(t){var e=i.calcDistanceInPercent(t.touches[0].clientX,t.touches[0].clientY);i.observer.move(e,i.isSecond),t.preventDefault(),t.stopPropagation()},this.handleObjectTouchEnd=function(){document.removeEventListener("touchmove",i.handleObjectTouchMove),i.observer.endMove(i.isSecond)},this.handleObjectTouchStart=function(t){document.addEventListener("touchmove",i.handleObjectTouchMove,{passive:!1}),document.addEventListener("touchend",i.handleObjectTouchEnd,{once:!0}),t.preventDefault(),t.stopPropagation(),i.observer.startMove(i.isSecond)},this.$object=t,this.observer=e,this.isSecond=Boolean(n),this.initMouseEvents(),this.initTouchEvents()}return t.prototype.update=function(t){this.isVertical=t.isVertical},t.prototype.initMouseEvents=function(){this.$object.on("mousedown",this.handleObjectMouseDown)},t.prototype.initTouchEvents=function(){this.$object[0].addEventListener("touchstart",this.handleObjectTouchStart,{passive:!1})},t.prototype.calcDistanceInPercent=function(t,e){var n=this.$object[0],i=this.$object.parent()[0];return this.isVertical?(e-n.getBoundingClientRect().top)/i.offsetHeight*100:(t-n.getBoundingClientRect().left)/i.offsetWidth*100},t}(),i=function(){function t(t,e,i){this.isSecond=Boolean(i),this.createDomElements(t),this.moveableObject=new n(this.$pointer,e,i)}return t.prototype.render=function(t){if(this.shouldBeDisplayed(t)){this.$pointer.show();var e=this.isSecond?t.secondPointerPositionInPercent:t.pointerPositionInPercent;t.isVertical?this.$pointer.css({top:e+"%",left:""}):this.$pointer.css({left:e+"%",top:""}),this.moveableObject.update(t)}else this.$pointer.hide()},t.prototype.setLayerLevel=function(t){this.$pointer.css("zIndex",t)},t.prototype.createDomElements=function(t){this.$pointer=$("<div>",{class:"slider__pointer"}),t.append(this.$pointer)},t.prototype.shouldBeDisplayed=function(t){return!this.isSecond||t.isRange},t}(),o=function(){function t(t,e){this.observer=e,this.createDomElements(t),this.attachEvents()}return t.prototype.render=function(t){if(this.isVertical=t.isVertical,t.shouldDisplayProgressBar){this.$progressBar.show();var e=t.isRange?[Math.min(t.pointerPositionInPercent,t.secondPointerPositionInPercent),Math.abs(t.pointerPositionInPercent-t.secondPointerPositionInPercent)]:[0,t.pointerPositionInPercent],n=e[0],i=e[1];t.isVertical?(this.$progressBar.css({height:i+"%",width:""}),this.$progressBar.css({top:n+"%",left:""})):(this.$progressBar.css({width:i+"%",height:""}),this.$progressBar.css({left:n+"%",top:""}))}else this.$progressBar.hide()},t.prototype.createDomElements=function(t){this.$bar=$("<div>",{class:"slider__bar"}),this.$progressBar=$("<div>",{class:"slider__progress-bar"}),t.append(this.$bar),this.$bar.append(this.$progressBar)},t.prototype.attachEvents=function(){this.$bar.on("click",this.handleBarClick.bind(this))},t.prototype.handleBarClick=function(t){var e=this.$bar[0],n=this.isVertical?(t.clientY-e.getBoundingClientRect().top)/e.offsetHeight*100:(t.clientX-e.getBoundingClientRect().left)/e.offsetWidth*100;this.observer.click(n)},t}(),s=function(){function t(t,e){this.isThereNotIntersection=function(t,e){return t.every((function(t){return t.start>e.end||t.end<e.start}))},this.observer=e,this.createDomElements(t)}return t.prototype.render=function(t){if(t.shouldDisplayScale){this.$scale.show();var e=this.getLabelsData(t);this.updateNumOfLabels(e.length),this.$labels.each((function(n){var i=$(this),o=e[n];i.data("pos",o.pos),i.text(o.val),t.isVertical?i.css({top:o.scalePos+"%",left:""}):i.css({left:o.scalePos+"%",top:""})}))}else this.$scale.hide()},t.prototype.createDomElements=function(t){this.$scale=$("<div>",{class:"slider__scale"}),t.append(this.$scale)},t.prototype.handleLabelClick=function(t){var e=$(t.currentTarget).data("pos");this.observer.click(e)},t.prototype.updateNumOfLabels=function(t){for(;this.$labels.length!==t;)this.$labels.length<t?this.$scale.append(this.createLabel()):this.$labels.last().remove()},t.prototype.createLabel=function(){var t=$("<div>",{class:"slider__scale-label"});return t.on("click",this.handleLabelClick.bind(this)),t},Object.defineProperty(t.prototype,"$labels",{get:function(){return this.$scale.children()},enumerable:!1,configurable:!0}),t.prototype.getLabelsData=function(t){for(var e=t.minValue,n=t.maxValue,i=t.step,o=function(t){return Math.floor((n-e)/(i*t))+1},s=[],r=20,a=e;a<n;){var c=this.getLabelData(a,t);this.isThereNotIntersection(s,c)?(s.push(c),a+=i*o(r)):(s.length=0,r-=1,a=e)}var h=this.getLabelData(n,t);return this.isThereNotIntersection(s,h)&&s.push(h),s},t.prototype.getLabelData=function(t,e){var n=c.convertPosToPercent(t,e),i=t>1e7?t.toExponential(5):Number.parseFloat(t.toFixed(Math.min(c.getNumDecimals(t),4))).toString(),o=this.getLabelSizeInPercent(i,e),s=n-o/2,r=n+o/2,a={pos:n,val:i,scalePos:n,start:s,end:r},h=[-1,101],l=h[0],p=h[1];return s<l?(a.start=l,a.end=l+o,a.scalePos=l+o/2):r>p&&(a.start=p-o,a.end=p,a.scalePos=p-o/2),a},t.prototype.getLabelSizeInPercent=function(t,e){if(!this.context){var n=document.createElement("canvas").getContext("2d");n&&(n.font=this.getLabelFont(),this.context=n)}if(this.context){if(!e.isVertical){var i=this.$scale[0].clientWidth;return this.context.measureText(t).width/i*100}return 18/this.$scale[0].clientHeight*100}return 100},t.prototype.getLabelFont=function(){var t=this.createLabel();t.appendTo(this.$scale);var e=t.css("font-weight")||"normal",n=t.css("font-size")||"16px",i=t.css("font-family")||"Times New Roman";return t.remove(),e+" "+n+" "+i},t}(),r=function(){function t(t,e,i){this.isSecond=Boolean(i),this.createDomElements(t),this.moveableObject=new n(this.$tip,e,i)}return t.prototype.render=function(t){if(this.shouldBeDisplayed(t)){this.$tip.show();var e=this.getTipData(this.isSecond?t.secondPointerPosition:t.pointerPosition,t);t.isVertical?this.$tip.css({top:e.pos+"%",left:""}):this.$tip.css({left:e.pos+"%",top:""}),this.$tip.text(e.val),this.moveableObject.update(t)}else this.$tip.hide()},t.prototype.setLayerLevel=function(t){this.$tip.css("zIndex",t)},t.prototype.createDomElements=function(t){this.$tip=$("<div>",{class:"slider__tip"}),t.append(this.$tip)},t.prototype.shouldBeDisplayed=function(t){return t.shouldDisplayTips&&(!this.isSecond||t.isRange)},t.prototype.getTipData=function(t,e){var n=c.convertPosToPercent(t,e),i=t>1e7?t.toExponential(5):t.toFixed(Math.min(c.getNumDecimals(t),4)),o=this.getTipSizeInPercent(i,e),s=n+o/2,r={pos:n,val:i},a=[-1,101],h=a[0],l=a[1];return n-o/2<h?r.pos=h+o/2:s>l&&(r.pos=l-o/2),r},t.prototype.getTipSizeInPercent=function(t,e){if(!this.context){var n=document.createElement("canvas").getContext("2d");n&&(n.font=this.getTipFont(),this.context=n)}if(this.context){if(!e.isVertical){var i=this.$tip.parent()[0].clientWidth;return this.context.measureText(t).width/i*100}return 18/this.$tip.parent()[0].clientHeight*100}return 100},t.prototype.getTipFont=function(){return(this.$tip.css("font-weight")||"normal")+" "+(this.$tip.css("font-size")||"16px")+" "+(this.$tip.css("font-family")||"Times New Roman")},t}();var a=function(){return a=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},a.apply(this,arguments)};const c=function(){function t(t,e){this.observer=e,this.createViewElements(t,this.makeObserverProxy())}return t.prototype.render=function(e){this.state=e,e.isVertical?this.$container.addClass("slider__container_vertical"):this.$container.removeClass("slider__container_vertical");var n=a(a({},e),{pointerPositionInPercent:t.convertPosToPercent(e.pointerPosition,e),secondPointerPositionInPercent:t.convertPosToPercent(e.secondPointerPosition,e)});[this.scale,this.bar,this.pointer,this.secondPointer,this.tip,this.secondTip].forEach((function(t){return t.render(n)}))},t.prototype.createViewElements=function(t,e){this.$container=$("<div>",{class:"slider__container"});var n=$("<div>",{class:"slider__scale-container"}),a=$("<div>",{class:"slider__bar-container"}),c=$("<div>",{class:"slider__tips-container"});this.$container.appendTo(t),this.$container.append(c).append(a).append(n),this.scale=new s(n,e),this.bar=new o(a,e),this.pointer=new i(a,e),this.secondPointer=new i(a,e,!0),this.tip=new r(c,e),this.secondTip=new r(c,e,!0)},t.prototype.makeObserverProxy=function(){var e=this;return a(a({},this.observer),{startMove:function(t){e.updateElementsLayerLevel(t),e.observer.startMove(t)},click:function(n){var i=t.convertPercentToPos(n,e.state);e.observer.click(i)},move:function(n,i){var o=t.convertPercentToValue(n,e.state);e.observer.move(o,i)}})},t.prototype.updateElementsLayerLevel=function(t){var e=t?[3,4]:[4,3],n=e[0],i=e[1];[this.tip,this.pointer].forEach((function(t){return t.setLayerLevel(n)})),[this.secondTip,this.secondPointer].forEach((function(t){return t.setLayerLevel(i)}))},t.convertPosToPercent=function(t,e){return(t-e.minValue)/(e.maxValue-e.minValue)*100},t.convertPercentToPos=function(t,e){return e.minValue+(e.maxValue-e.minValue)*(t/100)},t.convertPercentToValue=function(t,e){return(e.maxValue-e.minValue)*(t/100)},t.getNumDecimals=function(t){return t%1==0?0:t.toString().split(".")[1].length},t}();var h=function(){return h=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},h.apply(this,arguments)};const l=function(){function t(t,n){this.state=e,this.observer=n,this.state=this.getNextState(t)}return t.prototype.setState=function(t){this.state=this.getNextState(t),this.observer.update()},t.prototype.getState=function(){return this.state},t.prototype.getNextState=function(t){return this.nextState=h(h({},this.state),t),this.normalizeNextStateInterval(),this.normalizeNextStateStep(),this.normalizeNextStatePositions(),this.nextState},t.prototype.normalizeNextStateInterval=function(){if(!(this.nextState.maxValue>this.nextState.minValue)){var t=this.state.maxValue!==this.nextState.maxValue,e=this.state.minValue!==this.nextState.minValue;t&&e?this.nextState=h({},this.state):t?this.nextState.minValue=this.nextState.maxValue-1:this.nextState.maxValue=this.nextState.minValue+1}},t.prototype.normalizeNextStateStep=function(){var t=this.nextState.maxValue-this.nextState.minValue;this.nextState.step<=0&&(this.nextState.step=1),this.nextState.step>t&&(this.nextState.step=t)},t.prototype.normalizeNextStatePositions=function(){var t=this,e=function(e){var n=t.nextState,i=n.step,o=n.minValue,s=n.maxValue,r=Math.round((e-o)/i)*i+o;return r<o?o:r>s||s-e<e-r?s:r};this.nextState.pointerPosition=e(this.nextState.pointerPosition),this.nextState.secondPointerPosition=e(this.nextState.secondPointerPosition)},t}();var p=function(){return p=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},p.apply(this,arguments)};const u=function(){function t(t,e,n){this.observer=n,this.model=new l(e,this.createModelObserver()),this.view=new c(t,this.createViewObserver()),this.updateView()}return t.prototype.getOptions=function(t){var e=this.model.getState();return"string"==typeof t?e[t]:t.filter((function(t){return t in e})).reduce((function(t,n){var i;return p(p({},t),((i={})[n]=e[n],i))}),{})},t.prototype.setOptions=function(t){this.model.setState(t)},t.prototype.createViewObserver=function(){return{move:this.handleViewMove.bind(this),startMove:this.handleViewStartMove.bind(this),endMove:this.handleViewEndMove.bind(this),click:this.handleViewClick.bind(this)}},t.prototype.createModelObserver=function(){return{update:this.handleModelUpdate.bind(this)}},t.prototype.handleModelUpdate=function(){this.observer.update(),this.updateView()},t.prototype.handleViewStartMove=function(){this.observer.start()},t.prototype.handleViewEndMove=function(){this.observer.stop()},t.prototype.handleViewMove=function(t,e){var n=this.model.getState(),i=e?{secondPointerPosition:n.secondPointerPosition+t}:{pointerPosition:n.pointerPosition+t};this.model.setState(i),this.observer.slide()},t.prototype.handleViewClick=function(t){var e=this.model.getState(),n=t-e.pointerPosition<e.secondPointerPosition-t,i=!e.isRange||n?{pointerPosition:t}:{secondPointerPosition:t};this.model.setState(i),this.observer.start(),this.observer.slide(),this.observer.stop()},t.prototype.updateView=function(){this.view.render(this.model.getState())},t}();var d=function(){return d=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},d.apply(this,arguments)};return $.fn.superSlider=function(t,n){var i=$(this),o=void 0!==i.data("presenter"),s="object"==typeof t||"string"==typeof t&&void 0!==n,r="string"==typeof t&&void 0===n||Array.isArray(t)&&t.every((function(t){return"string"==typeof t})),a=function(){var i;return"object"!=typeof t||Array.isArray(t)?"string"==typeof t&&Object.keys(e).includes(t)?((i={})[t]=n,i):{}:Object.keys(t).filter((function(t){return t in e})).reduce((function(e,n){var i;return d(d({},e),((i={})[n]=t[n],i))}),{})};if(o&&r)return(c=i.data("presenter")).getOptions(t);if(o&&s){var c=i.data("presenter"),h=a();return c.setOptions(h),i}if(!o){var l={update:function(){i.trigger("sliderupdate")},start:function(){i.trigger("slidestart")},slide:function(){i.trigger("slide")},stop:function(){i.trigger("slidestop")}};return h=a(),i.data("presenter",new u(i,h,l)),i}return i},t})()}));