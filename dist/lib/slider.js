!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("slider",[],e):"object"==typeof exports?exports.slider=e():t.slider=e()}(self,(function(){return(()=>{"use strict";var t={};function e(t,e){var i=function(t){return void 0!==t?t+"%":""},s=t;s.style.top=i(e.top),s.style.left=i(e.left),s.style.bottom=i(e.bottom),s.style.right=i(e.right)}(t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})})(t);const i=function(){function t(t,e){this.scale=document.createElement("div"),this.labels=[],this.observer=e,this.configureDomElements(t)}return t.prototype.render=function(t){t.shouldDisplayScale?(this.scale.style.display="block",this.updateLabels(t)):this.scale.style.display="none"},t.prototype.configureDomElements=function(t){this.scale.classList.add("slider__scale"),t.appendChild(this.scale)},t.prototype.createLabel=function(){var t=this,e=document.createElement("div");return e.classList.add("slider__scale-label"),e.addEventListener("click",(function(){var i=Number.parseFloat(e.getAttribute("data-pos")||"0");t.observer.click(i)})),e},t.prototype.updateNumOfLabels=function(t){for(;this.labels.length!==t;)if(this.labels.length<t){var e=this.createLabel();this.scale.appendChild(e),this.labels.push(e)}else null==(e=this.labels.pop())||e.remove()},t.prototype.updateLabels=function(t){var i=this;this.updateNumOfLabels(t.scaleLabels.length),t.scaleLabels.forEach((function(s,n){var o=i.labels[n];o.setAttribute("data-pos",s.posPercentage.toString()),o&&(o.textContent=s.val,t.isVertical&&t.isInversion?e(o,{top:100-s.posPercentage}):t.isVertical?e(o,{top:s.posPercentage}):t.isInversion?e(o,{left:100-s.posPercentage}):e(o,{left:s.posPercentage}))})),this.updateLabelsVisibility(t)},t.prototype.updateLabelsVisibility=function(t){var e=0,i=1,s=new Set;for(s.add(0);e+i<this.labels.length;)this.isIntersection(e,e+i,t)?(i+=1,e=0,s=new Set):e+=i,s.add(e);this.labels.forEach((function(t,e){var i=t,n=s.has(e);i.style.visibility=n?"visible":"hidden"}))},t.prototype.isIntersection=function(t,e,i){var s=this.labels[t],n=this.labels[e],o=this.getLabelSizeInPercent(s,i),r=this.getLabelSizeInPercent(n,i),a=i.scaleLabels[t].posPercentage,c=i.scaleLabels[e].posPercentage;return a+o/2+(i.isVertical?30/this.scale.clientHeight*100:30/this.scale.clientWidth*100)>c-r/2},t.prototype.getLabelSizeInPercent=function(t,e){return e.isVertical?t.clientHeight/this.scale.clientHeight*100:t.clientWidth/this.scale.clientWidth*100},t}(),s=function(){function t(t,e){this.bar=document.createElement("div"),this.progressBar=document.createElement("div"),this.isVertical=!1,this.observer=e,this.configureDomElements(t),this.attachEventHandlers()}return t.prototype.render=function(t){if(this.isVertical=t.isVertical,t.shouldDisplayProgressBar){this.progressBar.style.display="block";var i=t.pointerPosPercentage,s=t.secondPointerPosPercentage,n=t.isRange?[Math.min(i,s),Math.abs(i-s)]:[0,i],o=n[0],r=n[1];t.isVertical&&t.isInversion?e(this.progressBar,{top:100-o-r}):t.isVertical?e(this.progressBar,{top:o}):t.isInversion?e(this.progressBar,{left:100-o-r}):e(this.progressBar,{left:o}),t.isVertical?(this.progressBar.style.height=r+"%",this.progressBar.style.width=""):(this.progressBar.style.height="",this.progressBar.style.width=r+"%")}else this.progressBar.style.display="none"},t.prototype.configureDomElements=function(t){this.bar.classList.add("slider__bar"),this.progressBar.classList.add("slider__progress-bar"),this.bar.appendChild(this.progressBar),t.appendChild(this.bar)},t.prototype.attachEventHandlers=function(){this.bar.addEventListener("click",this.handleBarClick.bind(this))},t.prototype.handleBarClick=function(t){var e=this.isVertical?(t.clientY-this.bar.getBoundingClientRect().top)/this.bar.offsetHeight*100:(t.clientX-this.bar.getBoundingClientRect().left)/this.bar.offsetWidth*100;this.observer.click(e)},t}(),n=function(){function t(t,e,i){var s=this;this.startOffset=0,this.offsetX=0,this.offsetY=0,this.isVertical=!1,this.isInversion=!1,this.position=0,this.handleObjectMouseMove=function(t){var e=s.calcPositionInPercent(t.clientX-s.offsetX,t.clientY-s.offsetY);s.observer.move(e-s.startOffset,s.isSecond)},this.handleObjectMouseUp=function(){document.removeEventListener("mousemove",s.handleObjectMouseMove),s.observer.endMove(s.isSecond)},this.handleObjectMouseDown=function(t){document.addEventListener("mousemove",s.handleObjectMouseMove),document.addEventListener("mouseup",s.handleObjectMouseUp,{once:!0}),s.offsetX=t.offsetX-s.object.clientWidth/2,s.offsetY=t.offsetY-s.object.clientHeight/2,s.startOffset=s.calcPositionInPercent(t.clientX-s.offsetX,t.clientY-s.offsetY)-s.position,s.observer.startMove(s.isSecond)},this.handleObjectTouchMove=function(t){var e=s.calcPositionInPercent(t.touches[0].clientX,t.touches[0].clientY);s.observer.move(e,s.isSecond),t.preventDefault(),t.stopPropagation()},this.handleObjectTouchEnd=function(){document.removeEventListener("touchmove",s.handleObjectTouchMove),s.observer.endMove(s.isSecond)},this.handleObjectTouchStart=function(t){document.addEventListener("touchmove",s.handleObjectTouchMove,{passive:!1}),document.addEventListener("touchend",s.handleObjectTouchEnd,{once:!0}),t.preventDefault(),t.stopPropagation(),s.observer.startMove(s.isSecond)},this.object=t,this.observer=e,this.isSecond=Boolean(i),this.initMouseEvents(),this.initTouchEvents()}return t.prototype.update=function(t){this.isVertical=t.isVertical,this.isInversion=t.isInversion,this.position=this.isSecond?t.secondPointerPosPercentage:t.pointerPosPercentage},t.prototype.initMouseEvents=function(){this.object.addEventListener("mousedown",this.handleObjectMouseDown)},t.prototype.initTouchEvents=function(){this.object.addEventListener("touchstart",this.handleObjectTouchStart,{passive:!1})},t.prototype.calcPositionInPercent=function(t,e){var i=this.object.parentElement;if(!i)return 0;var s=i.getBoundingClientRect(),n=s.top,o=s.left;return this.isVertical&&this.isInversion?(n-e)/i.offsetHeight*100:this.isVertical?(e-n)/i.offsetHeight*100:this.isInversion?(o-t)/i.offsetWidth*100:(t-o)/i.offsetWidth*100},t}(),o=function(){function t(t,e,i){this.pointer=document.createElement("div"),this.isSecond=Boolean(i),this.configureDomElements(t),this.moveableObject=new n(this.pointer,e,i)}return t.prototype.render=function(t){if(this.shouldBeDisplayed(t)){this.pointer.style.display="block";var i=this.isSecond?t.secondPointerPosPercentage:t.pointerPosPercentage;t.isVertical&&t.isInversion?e(this.pointer,{top:100-i}):t.isVertical?e(this.pointer,{top:i}):t.isInversion?e(this.pointer,{left:100-i}):e(this.pointer,{left:i}),this.moveableObject.update(t)}else this.pointer.style.display="none"},t.prototype.configureDomElements=function(t){this.pointer.classList.add("slider__pointer"),t.appendChild(this.pointer)},t.prototype.shouldBeDisplayed=function(t){return!this.isSecond||t.isRange},t}(),r=function(){function t(t,e){this.tip=document.createElement("div"),this.secondTip=document.createElement("div"),this.parent=t,this.configureDomElements(),this.moveableObjects=[new n(this.tip,e),new n(this.secondTip,e,!0)]}return t.prototype.render=function(i){if(!i.shouldDisplayTips)return this.tip.style.display="none",void(this.secondTip.style.display="none");this.tip.style.display="block",this.secondTip.style.display=i.isRange?"block":"none",this.tip.textContent=i.tipValue,this.secondTip.textContent=i.secondTipValue,this.moveableObjects.forEach((function(t){return t.update(i)}));var s=this.getTipsPositions(i),n=s.tipPos,o=s.secondTipPos,r=s.isConnected,a=s.isTipCloserToStart;i.isVertical&&i.isInversion?(e(this.tip,{top:100-n}),e(this.secondTip,{top:100-o})):i.isVertical?(e(this.tip,{top:n}),e(this.secondTip,{top:o})):i.isInversion?(e(this.tip,{left:100-n}),e(this.secondTip,{left:100-o})):(e(this.tip,{left:n}),e(this.secondTip,{left:o})),r&&i.isRange?a?(this.tip.classList.add(t.TIP_CLASS_CONNECTED),this.secondTip.classList.remove(t.TIP_CLASS_CONNECTED)):(this.tip.classList.remove(t.TIP_CLASS_CONNECTED),this.secondTip.classList.add(t.TIP_CLASS_CONNECTED)):(this.tip.classList.remove(t.TIP_CLASS_CONNECTED),this.secondTip.classList.remove(t.TIP_CLASS_CONNECTED))},t.prototype.configureDomElements=function(){this.tip.classList.add("slider__tip"),this.secondTip.classList.add("slider__tip"),this.parent.appendChild(this.tip),this.parent.appendChild(this.secondTip)},t.prototype.getTipsPositions=function(t){var e=t.pointerPosPercentage,i=t.secondPointerPosPercentage,s=this.getTipsSizeInPercent(t),n=s.tipSize,o=s.secondTipSize,r=Math.abs(e-i),a=r<(n+o)/2,c=t.tipValue===t.secondTipValue,l=e<i;if(a&&!c&&t.isRange){var h=((n+o)/2-r)/2,p=l?[e-h,i+h]:[e+h,i-h];return{tipPos:p[0],secondTipPos:p[1],isConnected:!0,isTipCloserToStart:l!==t.isInversion}}return{tipPos:e,secondTipPos:i,isConnected:!1}},t.prototype.getTipsSizeInPercent=function(t){if(t.isVertical){var e=this.parent.clientHeight;return{tipSize:this.tip.clientHeight/e*100,secondTipSize:this.secondTip.clientHeight/e*100}}var i=this.parent.clientWidth;return{tipSize:this.tip.clientWidth/i*100,secondTipSize:this.secondTip.clientWidth/i*100}},t.TIP_CLASS_CONNECTED="slider__tip_connected",t}();var a=function(){return a=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},a.apply(this,arguments)};const c=function(){function t(t,e){this.container=document.createElement("div"),this.tipsContainer=document.createElement("div"),this.barContainer=document.createElement("div"),this.scaleContainer=document.createElement("div"),this.isLoading=!0,this.elements=this.createViewElements(e),this.configureDomElements(t),this.attachEventHandlers()}return t.prototype.render=function(t){this.props=a({},t),this.isLoading||this.updateView(t)},t.prototype.updateView=function(t){t.isVertical?this.container.classList.add("slider_vertical"):this.container.classList.remove("slider_vertical"),Object.values(this.elements).forEach((function(e){e.render(t)}))},t.prototype.handleWindowResize=function(){this.props&&this.updateView(this.props)},t.prototype.handleWindowLoad=function(){this.isLoading=!1,this.props&&this.updateView(this.props)},t.prototype.attachEventHandlers=function(){window.addEventListener("resize",this.handleWindowResize.bind(this)),window.addEventListener("load",this.handleWindowLoad.bind(this))},t.prototype.configureDomElements=function(t){var e=this;this.container.classList.add("slider"),[this.tipsContainer,this.barContainer,this.scaleContainer].forEach((function(t){t.classList.add("slider__container"),e.container.appendChild(t)})),t.appendChild(this.container)},t.prototype.createViewElements=function(t){return{scale:new i(this.scaleContainer,t),bar:new s(this.barContainer,t),pointer:new o(this.barContainer,t),secondPointer:new o(this.barContainer,t,!0),tips:new r(this.tipsContainer,t)}},t}();var l={isVertical:!1,isRange:!0,isInversion:!1,shouldDisplayTips:!0,shouldDisplayProgressBar:!0,shouldDisplayScale:!1,minValue:0,maxValue:100,step:1,pointerPosition:20,secondPointerPosition:80},h=function(){return h=Object.assign||function(t){for(var e,i=1,s=arguments.length;i<s;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},h.apply(this,arguments)};const p=function(){function t(t,e){this.state=l,this.nextState=l,this.observer=e,this.state=this.getNextState(t)}return t.prototype.setState=function(t,e){var i=this.getNextState(t);this.isEqualStates(this.state,i)&&!e||(this.state=i,this.observer.update(this.mapStateToProps()))},t.prototype.getState=function(){return this.state},t.prototype.setPositionsPercentage=function(t){var e={};t.pointer&&(e.pointerPosition=this.convertPercentageToPos(t.pointer)),t.secondPointer&&(e.secondPointerPosition=this.convertPercentageToPos(t.secondPointer)),this.setState(e)},t.prototype.setPositionPercentage=function(t){var e=this.convertPercentageToPos(t),i=Math.abs(e-this.state.pointerPosition)<Math.abs(e-this.state.secondPointerPosition);this.setState(!this.state.isRange||i?{pointerPosition:e}:{secondPointerPosition:e})},t.prototype.mapStateToProps=function(){return h(h({},this.state),{pointerPosPercentage:this.convertPosToPercentage(this.state.pointerPosition),secondPointerPosPercentage:this.convertPosToPercentage(this.state.secondPointerPosition),tipValue:this.convertPosToString(this.state.pointerPosition),secondTipValue:this.convertPosToString(this.state.secondPointerPosition),scaleLabels:this.createScaleLabels()})},t.prototype.convertPosToPercentage=function(t){var e=this.state,i=e.maxValue,s=e.minValue;return(t-s)/(i-s)*100},t.prototype.convertPercentageToPos=function(t){var e=this.state,i=e.maxValue,s=e.minValue;return s+t/100*(i-s)},t.prototype.convertPosToString=function(t){return t>1e6?t.toExponential(3):this.getRoundedValue(t,this.state.step).toString()},t.prototype.createScaleLabels=function(){for(var t=this.state,e=t.maxValue,i=t.minValue,s=t.step,n=Math.ceil((e-i)/(25*s))*s,o=[],r=i;r<=e;r+=n)o.push({posPercentage:this.convertPosToPercentage(r),val:this.convertPosToString(r)});return o},t.prototype.getNextState=function(t){return this.nextState=h(h({},this.state),t),this.normalizeNextStateInterval(),this.normalizeNextStateStep(),this.normalizeNextStatePositions(),this.nextState},t.prototype.normalizeNextStateInterval=function(){if(!(this.nextState.maxValue>this.nextState.minValue)){var t=this.state.maxValue!==this.nextState.maxValue,e=this.state.minValue!==this.nextState.minValue;t&&e?this.nextState=h({},this.state):t?this.nextState.minValue=this.nextState.maxValue-1:this.nextState.maxValue=this.nextState.minValue+1}},t.prototype.normalizeNextStateStep=function(){var t=this.nextState.maxValue-this.nextState.minValue;this.nextState.step<=0&&(this.nextState.step=1),this.nextState.step>t&&(this.nextState.step=t)},t.prototype.normalizeNextStatePositions=function(){var t=this,e=this.nextState,i=e.step,s=e.minValue,n=e.maxValue,o=[e.pointerPosition,e.secondPointerPosition].map((function(e){var o=Math.round((e-s)/i)*i+s,r=t.getRoundedValue(o,i);return o<s?s:o>n||n-e<e-o?n:r})),r=o[0],a=o[1];this.nextState.pointerPosition=r,this.nextState.secondPointerPosition=a},t.prototype.isEqualStates=function(t,e){return Object.keys(t).every((function(i){return t[i]===e[i]}))},t.prototype.getRoundedValue=function(t,e){var i=e%1==0?0:e.toString().split(".")[1].length;return Number.parseFloat(t.toFixed(i))},t}(),d=function(){function t(t,e,i){this.observer=i,this.model=new p(e,this.createModelObserver()),this.view=new c(t,this.createViewObserver()),this.model.setState({},!0)}return t.prototype.getOptions=function(){return this.model.getState()},t.prototype.setOptions=function(t){this.model.setState(t)},t.prototype.createViewObserver=function(){return{move:this.handleViewMove.bind(this),startMove:this.handleViewStartMove.bind(this),endMove:this.handleViewEndMove.bind(this),click:this.handleViewClick.bind(this)}},t.prototype.createModelObserver=function(){return{update:this.handleModelUpdate.bind(this)}},t.prototype.handleModelUpdate=function(t){this.observer.update(),this.view.render(t)},t.prototype.handleViewStartMove=function(){this.observer.start()},t.prototype.handleViewEndMove=function(){this.observer.stop()},t.prototype.handleViewMove=function(t,e){var i=e?{secondPointer:t}:{pointer:t};this.model.setPositionsPercentage(i),this.observer.slide()},t.prototype.handleViewClick=function(t){this.model.setPositionPercentage(t),this.observer.start(),this.observer.slide(),this.observer.stop()},t}();return $.fn.superSlider=function(t){var e=this,i=e.data("sliderInterface");if(i)t&&i.setOptions(t);else{var s={update:function(){e.trigger("sliderupdate")},start:function(){e.trigger("slidestart")},slide:function(){e.trigger("slide")},stop:function(){e.trigger("slidestop")}},n=t||{};e.data("sliderInterface",new d(e[0],n,s))}return e},t})()}));