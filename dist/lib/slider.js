!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("slider",[],t):"object"==typeof exports?exports.slider=t():e.slider=t()}(self,(function(){return(()=>{"use strict";var e={};(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);var t={isVertical:!1,isRange:!0,shouldDisplayTips:!0,shouldDisplayProgressBar:!0,shouldDisplayScale:!1,maxNumberLabels:20,minValue:0,maxValue:100,step:1,pointerPosition:20,secondPointerPosition:80};const i=function(){function e(e,t,i){var o=this;this.handleObjectMouseMove=function(e){var t=o.calcDistanceInPercent(e.clientX-o.offsetX,e.clientY-o.offsetY);o.observer.move(t,o.isSecond)},this.handleObjectMouseUp=function(){$(document).off("mousemove",o.handleObjectMouseMove),o.observer.endMove(o.isSecond)},this.handleObjectMouseDown=function(e){$(document).on("mousemove",o.handleObjectMouseMove),$(document).one("mouseup",o.handleObjectMouseUp),o.offsetX=e.offsetX,o.offsetY=e.offsetY,o.observer.startMove(o.isSecond)},this.handleObjectTouchMove=function(e){var t=o.calcDistanceInPercent(e.touches[0].clientX,e.touches[0].clientY);o.observer.move(t,o.isSecond),e.preventDefault(),e.stopPropagation()},this.handleObjectTouchEnd=function(){document.removeEventListener("touchmove",o.handleObjectTouchMove),o.observer.endMove(o.isSecond)},this.handleObjectTouchStart=function(e){document.addEventListener("touchmove",o.handleObjectTouchMove,{passive:!1}),document.addEventListener("touchend",o.handleObjectTouchEnd,{once:!0}),e.preventDefault(),e.stopPropagation(),o.observer.startMove(o.isSecond)},this.$object=e,this.observer=t,this.isSecond=Boolean(i),this.initMouseEvents(),this.initTouchEvents()}return e.prototype.update=function(e){this.isVertical=e.isVertical},e.prototype.initMouseEvents=function(){this.$object.on("mousedown",this.handleObjectMouseDown)},e.prototype.initTouchEvents=function(){this.$object[0].addEventListener("touchstart",this.handleObjectTouchStart,{passive:!1})},e.prototype.calcDistanceInPercent=function(e,t){return this.isVertical?(t-this.$object[0].getBoundingClientRect().top)/this.$object.parent().height()*100:(e-this.$object[0].getBoundingClientRect().left)/this.$object.parent().width()*100},e}(),o=function(){function e(e,t,o){this.isSecond=Boolean(o),this.createDomElements(e),this.moveableObject=new i(this.$pointer,t,o)}return e.prototype.render=function(e){if(this.shouldBeDisplayed(e)){this.$pointer.show();var t=this.isSecond?e.secondPointerPosition:e.pointerPosition;e.isVertical?this.$pointer.css({top:t+"%",left:""}):this.$pointer.css({left:t+"%",top:""}),this.moveableObject.update(e)}else this.$pointer.hide()},e.prototype.setLayerLevel=function(e){this.$pointer.css("zIndex",e)},e.prototype.createDomElements=function(e){this.$pointer=$("<div>",{class:"slider__pointer"}),e.append(this.$pointer)},e.prototype.shouldBeDisplayed=function(e){return!this.isSecond||e.isRange},e}(),n=function(){function e(e,t){this.observer=t,this.createDomElements(e),this.atachEvents()}return e.prototype.render=function(e){if(this.isVertical=e.isVertical,e.shouldDisplayProgressBar){this.$progressBar.show();var t=e.isRange?[e.pointerPosition,e.secondPointerPosition-e.pointerPosition]:[0,e.pointerPosition],i=t[0],o=t[1];e.isVertical?(this.$progressBar.css({height:o+"%",width:""}),this.$progressBar.css({top:i+"%",left:""})):(this.$progressBar.css({width:o+"%",height:""}),this.$progressBar.css({left:i+"%",top:""}))}else this.$progressBar.hide()},e.prototype.createDomElements=function(e){this.$bar=$("<div>",{class:"slider__bar"}),this.$progressBar=$("<div>",{class:"slider__progress-bar"}),e.append(this.$bar),this.$bar.append(this.$progressBar)},e.prototype.atachEvents=function(){this.$bar.on("click",this.handleBarClick.bind(this))},e.prototype.handleBarClick=function(e){var t=this.isVertical?(e.clientY-this.$bar[0].getBoundingClientRect().top)/this.$bar.height()*100:(e.clientX-this.$bar[0].getBoundingClientRect().left)/this.$bar.width()*100;this.observer.click(t)},e}(),s=function(){function e(e,t){this.observer=t,this.createDomElements(e)}return e.prototype.render=function(e){e.shouldDisplayScale?(this.$scale.show(),this.updateNumOfLabels(e.scaleLabels.length),this.$labels.each((function(t){var i=$(this),o=e.scaleLabels[t];i.data("pos",o.pos),i.text(o.val),e.isVertical?i.css({top:o.pos+"%",left:""}):i.css({left:o.pos+"%",top:""})}))):this.$scale.hide()},e.prototype.createDomElements=function(e){this.$scale=$("<div>",{class:"slider__scale"}),e.append(this.$scale)},e.prototype.handleLableClick=function(e){var t,i=$(e.currentTarget).data("pos");null===(t=this.observer)||void 0===t||t.click(i)},e.prototype.updateNumOfLabels=function(e){for(;this.$labels.length!==e;)this.$labels.length<e?this.$scale.append(this.createLabel()):this.$labels.last().remove()},e.prototype.createLabel=function(){var e=$("<div>",{class:"slider__scale-label"});return e.on("click",this.handleLableClick.bind(this)),e},Object.defineProperty(e.prototype,"$labels",{get:function(){return this.$scale.children()},enumerable:!1,configurable:!0}),e}(),r=function(){function e(e,t,o){this.isSecond=Boolean(o),this.createDomElements(e),this.moveableObject=new i(this.$tip,t,o)}return e.prototype.render=function(e){if(this.shouldBeDisplayed(e)){this.$tip.show();var t=this.isSecond?e.secondPointerPosition:e.pointerPosition;e.isVertical?this.$tip.css({top:t+"%",left:""}):this.$tip.css({left:t+"%",top:""});var i=this.isSecond?e.secondTipValue:e.tipValue;this.$tip.text(i),this.moveableObject.update(e)}else this.$tip.hide()},e.prototype.setLayerLevel=function(e){this.$tip.css("zIndex",e)},e.prototype.createDomElements=function(e){this.$tip=$("<div>",{class:"slider__tip"}),e.append(this.$tip)},e.prototype.shouldBeDisplayed=function(e){return e.shouldDisplayTips&&(!this.isSecond||e.isRange)},e}();var a=function(){return a=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},a.apply(this,arguments)};const c=function(){function e(e,t){this.observer=t,this.createViewElements(e,this.makeObserverProxy())}return e.prototype.render=function(t){t.isVertical?this.$container.addClass("slider__container_vertical"):this.$container.removeClass("slider__container_vertical"),e.isEachPointerAtStart(t)?this.updateElementsLayerLevel(!0):e.isEachPointerAtEnd(t)&&this.updateElementsLayerLevel(!1),[this.scale,this.bar,this.pointer,this.secondPointer,this.tip,this.secondTip].forEach((function(e){return e.render(t)}))},e.prototype.createViewElements=function(e,t){this.$container=$("<div>",{class:"slider__container"});var i=$("<div>",{class:"slider__scale-container"}),a=$("<div>",{class:"slider__bar-container"}),c=$("<div>",{class:"slider__tips-container"});e.append(this.$container),this.$container.append(c).append(a).append(i),this.scale=new s(i,t),this.bar=new n(a,t),this.pointer=new o(a,t),this.secondPointer=new o(a,t,!0),this.tip=new r(c,t),this.secondTip=new r(c,t,!0)},e.prototype.makeObserverProxy=function(){var e=this;return a(a({},this.observer),{startMove:function(t){e.updateElementsLayerLevel(t),e.observer.startMove(t)}})},e.prototype.updateElementsLayerLevel=function(e){var t=e?[3,4]:[4,3],i=t[0],o=t[1];[this.tip,this.pointer].forEach((function(e){return e.setLayerLevel(i)})),[this.secondTip,this.secondPointer].forEach((function(e){return e.setLayerLevel(o)}))},e.isEachPointerAtStart=function(e){return e.isRange&&0===e.pointerPosition&&0===e.secondPointerPosition},e.isEachPointerAtEnd=function(e){return e.isRange&&100===e.pointerPosition&&100===e.secondPointerPosition},e}();var l=function(){return l=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},l.apply(this,arguments)};const u=function(){function e(i,o){this.state=t,this.observer=o,this.state=e.getNormalizedState(i,this.state)}return e.prototype.setState=function(t){this.state=e.getNormalizedState(t,this.state),this.observer.update()},e.prototype.getState=function(){return this.state},e.getNormalizedState=function(t,i){var o=e.getStateWithNormalizedMaxMin(t,i),n=e.getStateWithNormalizedStep(o),s=e.getStateWithNormalizedPositions(n,i);return e.getStateWithNormalizedNumLabels(s)},e.getStateWithNormalizedMaxMin=function(e,t){var i=t.maxValue!==e.maxValue,o=t.minValue!==e.minValue,n=e.maxValue>e.minValue;return!n&&i&&o?l({},t):!n&&i?l(l({},e),{minValue:e.maxValue-1}):!n&&o?l(l({},e),{maxValue:e.minValue+1}):l({},e)},e.getStateWithNormalizedStep=function(e){var t=e.step<=0?1:e.step;return t>e.maxValue-e.minValue?l(l({},e),{step:e.maxValue-e.minValue}):l(l({},e),{step:t})},e.getStateWithNormalizedPositions=function(e,t){var i=[e.pointerPosition,e.secondPointerPosition].map((function(t){var i=Math.round((t-e.minValue)/e.step)*e.step+e.minValue;return i<e.minValue?e.minValue:i>e.maxValue?e.maxValue:i})),o=i[0],n=i[1],s=t.pointerPosition!==e.pointerPosition,r=t.secondPointerPosition!==e.secondPointerPosition,a=!e.isRange||n>=o;return!a&&s&&r?t:l(l({},e),!a&&r?{pointerPosition:n,secondPointerPosition:n}:a?{pointerPosition:o,secondPointerPosition:n}:{pointerPosition:o,secondPointerPosition:o})},e.getStateWithNormalizedNumLabels=function(e){var t=Math.max(Math.round(e.maxNumberLabels),2);return l(l({},e),{maxNumberLabels:t})},e}();var p=function(){return p=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},p.apply(this,arguments)};const h=function(){function e(e,i,o){this.observer=o,this.model=new u(p(p({},t),i),this.createModelObserver()),this.view=new c(e,this.createViewObserver()),this.updateView()}return e.prototype.getOptions=function(e){var t=this.model.getState();return"string"==typeof e?t[e]:e.filter((function(e){return e in t})).reduce((function(e,i){var o;return p(p({},e),((o={})[i]=t[i],o))}),{})},e.prototype.setOptions=function(e){var t=this.model.getState();this.model.setState(p(p({},t),e))},e.prototype.createViewObserver=function(){return{move:this.handleViewMove.bind(this),startMove:this.handleViewStartMove.bind(this),endMove:this.handleViewEndMove.bind(this),click:this.handleViewClick.bind(this)}},e.prototype.createModelObserver=function(){return{update:this.handleModelUpdate.bind(this)}},e.prototype.handleModelUpdate=function(){this.updateView(),this.observer.update()},e.prototype.handleViewStartMove=function(){this.observer.start()},e.prototype.handleViewEndMove=function(){this.observer.stop()},e.prototype.handleViewMove=function(t,i){var o=this.model.getState(),n=e.convertPersentToValue(t,o),s=i?o.secondPointerPosition+n:o.pointerPosition+n;o.isRange?i?this.model.setState(p(p({},o),{secondPointerPosition:Math.max(s,o.pointerPosition)})):this.model.setState(p(p({},o),{pointerPosition:Math.min(s,o.secondPointerPosition)})):this.model.setState(p(p({},o),{pointerPosition:s})),this.observer.slide()},e.prototype.handleViewClick=function(t){var i=this.model.getState(),o=e.convertPersentToPos(t,i);!i.isRange||e.isPosCloserToFirstPointer(o,i)?this.model.setState(p(p({},i),{pointerPosition:o})):this.model.setState(p(p({},i),{secondPointerPosition:o})),this.observer.start(),this.observer.slide(),this.observer.stop()},e.prototype.updateView=function(){this.view.render(e.getViewProps(this.model.getState()))},e.getViewProps=function(t){var i=[t.pointerPosition,t.secondPointerPosition].map((function(i){return e.convertPosToPercent(i,t)})),o=i[0],n=i[1],s=[t.pointerPosition,t.secondPointerPosition].map((function(i){return i.toFixed(e.getNumDecimals(t.step))})),r=s[0],a=s[1],c=e.getScaleLabels(t);return{isVertical:t.isVertical,isRange:t.isRange,shouldDisplayTips:t.shouldDisplayTips,shouldDisplayProgressBar:t.shouldDisplayProgressBar,shouldDisplayScale:t.shouldDisplayScale,pointerPosition:o,secondPointerPosition:n,tipValue:r,secondTipValue:a,scaleLabels:c}},e.getScaleLabels=function(t){for(var i=[],o=(t.maxValue-t.minValue)/t.maxNumberLabels,n=Math.max(o,t.step),s=t.minValue;s<=t.maxValue;s+=n)i.push({val:s.toFixed(e.getNumDecimals(t.step)),pos:e.convertPosToPercent(s,t)});var r=i[i.length-1].pos;return Math.abs(r-100)>=.5&&i.push({val:t.maxValue.toString(),pos:100}),i},e.convertPosToPercent=function(e,t){return(e-t.minValue)/(t.maxValue-t.minValue)*100},e.convertPersentToPos=function(e,t){return t.minValue+(t.maxValue-t.minValue)*(e/100)},e.convertPersentToValue=function(e,t){return(t.maxValue-t.minValue)*(e/100)},e.isPosCloserToFirstPointer=function(e,t){return e-t.pointerPosition<t.secondPointerPosition-e},e.getNumDecimals=function(e){return e%1==0?0:e.toString().split(".")[1].length},e}();var d=function(){return d=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},d.apply(this,arguments)};return $.fn.superSlider=function(e,i){var o=$(this),n=void 0!==o.data("presenter"),s="object"==typeof e||"string"==typeof e&&("number"==typeof i||"boolean"==typeof i),r=void 0===i&&("string"==typeof e||Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))),a=function(){var o;return"object"==typeof e?Object.keys(e).filter((function(e){return e in t})).reduce((function(t,i){var o;return d(d({},t),((o={})[i]=e[i],o))}),{}):"string"==typeof e&&Object.keys(t).includes(e)?((o={})[e]=i,o):{}};if(n&&r)return(c=o.data("presenter")).getOptions(e);if(n&&s){var c=o.data("presenter"),l=a();return c.setOptions(l),o}if(!n){var u={update:function(){o.trigger("sliderupdate")},start:function(){o.trigger("slidestart")},slide:function(){o.trigger("slide")},stop:function(){o.trigger("slidestop")}};return l=a(),o.data("presenter",new h(o,l,u)),o}return o},e})()}));