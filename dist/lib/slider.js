!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("superSlider",[],e):"object"==typeof exports?exports.superSlider=e():t.superSlider=e()}(self,(function(){return(()=>{"use strict";var t={};(t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})})(t);const e=function(){function t(t){var e=this;this.handleObjectMouseMove=function(t){var i,o=e.calcDistanceInPercent(t.clientX-e.offsetX,t.clientY-e.offsetY);null===(i=e.observer)||void 0===i||i.move(o.x,o.y)},this.handleObjectMouseUp=function(){var t;$(document).off("mousemove",e.handleObjectMouseMove),null===(t=e.observer)||void 0===t||t.endMove()},this.handleObjectMouseDown=function(t){var i;$(document).on("mousemove",e.handleObjectMouseMove),$(document).one("mouseup",e.handleObjectMouseUp),e.offsetX=t.offsetX,e.offsetY=t.offsetY,null===(i=e.observer)||void 0===i||i.startMove()},this.handleObjectTouchMove=function(t){var i,o=e.calcDistanceInPercent(t.touches[0].clientX,t.touches[0].clientY);null===(i=e.observer)||void 0===i||i.move(o.x,o.y),t.preventDefault(),t.stopPropagation()},this.handleObjectTouchEnd=function(){var t;document.removeEventListener("touchmove",e.handleObjectTouchMove),null===(t=e.observer)||void 0===t||t.endMove()},this.handleObjectTouchStart=function(t){var i;document.addEventListener("touchmove",e.handleObjectTouchMove,{passive:!1}),document.addEventListener("touchend",e.handleObjectTouchEnd,{once:!0}),t.preventDefault(),t.stopPropagation(),null===(i=e.observer)||void 0===i||i.startMove()},this.$object=t,this.initMouseEvents(),this.initTouchEvents()}return t.prototype.setObserver=function(t){this.observer=t},t.prototype.initMouseEvents=function(){this.$object.on("mousedown",this.handleObjectMouseDown)},t.prototype.initTouchEvents=function(){this.$object[0].addEventListener("touchstart",this.handleObjectTouchStart,{passive:!1})},t.prototype.calcDistanceInPercent=function(t,e){var i=t-this.$object[0].getBoundingClientRect().left,o=e-this.$object[0].getBoundingClientRect().top;return{x:i/this.$object.parent().width()*100,y:o/this.$object.parent().height()*100}},t}(),i=function(){function t(t,e){this.isSecond=void 0!==e&&e,this.createDomElements(t),this.atachEvents()}return t.prototype.render=function(t){!1!==t.display?(this.$pointer.show(),this.isVertical=t.vertical,void 0!==t.zIndex&&this.$pointer.css("zIndex",t.zIndex),t.vertical?this.$pointer.css({top:t.position+"%",left:""}):this.$pointer.css({left:t.position+"%",top:""})):this.$pointer.hide()},t.prototype.setObserver=function(t){this.observer=t},t.prototype.createDomElements=function(t){this.$pointer=$("<div>",{class:"slider__pointer"}),t.append(this.$pointer)},t.prototype.atachEvents=function(){this.moveableObject=new e(this.$pointer),this.moveableObject.setObserver(this.createMovableObjectObserver())},t.prototype.createMovableObjectObserver=function(){return{startMove:this.handlePointerStartMove.bind(this),move:this.handlePointerMove.bind(this),endMove:this.handlePointerEndMove.bind(this)}},t.prototype.handlePointerStartMove=function(){var t;null===(t=this.observer)||void 0===t||t.startMove(this.isSecond)},t.prototype.handlePointerMove=function(t,e){var i,o=this.isVertical?e:t;null===(i=this.observer)||void 0===i||i.move(o,this.isSecond)},t.prototype.handlePointerEndMove=function(){var t;null===(t=this.observer)||void 0===t||t.endMove(this.isSecond)},t}(),o=function(){function t(t){this.createDomElements(t),this.atachEvents()}return t.prototype.render=function(t){!1!==t.progressbar?(this.$progressSegment.show(),this.isVertical=t.vertical,t.vertical?(this.$progressSegment.css({height:t.intervalLength+"%",width:""}),this.$progressSegment.css({top:t.intervalStartPos+"%",left:""})):(this.$progressSegment.css({width:t.intervalLength+"%",height:""}),this.$progressSegment.css({left:t.intervalStartPos+"%",top:""}))):this.$progressSegment.hide()},t.prototype.setObserver=function(t){this.observer=t},t.prototype.createDomElements=function(t){this.$bar=$("<div>",{class:"slider__bar"}),this.$progressSegment=$("<div>",{class:"slider__progress-segment"}),t.append(this.$bar),this.$bar.append(this.$progressSegment)},t.prototype.atachEvents=function(){this.$bar.on("click",this.handleBarClick.bind(this))},t.prototype.handleBarClick=function(t){var e,i;i=this.isVertical?(t.clientY-this.$bar[0].getBoundingClientRect().top)/this.$bar.height()*100:(t.clientX-this.$bar[0].getBoundingClientRect().left)/this.$bar.width()*100,null===(e=this.observer)||void 0===e||e.click(i)},t}(),s=function(){function t(t){this.createDomElements(t)}return t.prototype.render=function(t){!1!==t.display?(this.$scale.show(),this.updateNumOfLabels(t.labels.length),this.$labels.each((function(e){var i=$(this),o=t.labels[e];i.data("pos",o.pos),i.text(o.val),t.vertical?i.css({top:o.pos+"%",left:""}):i.css({left:o.pos+"%",top:""})}))):this.$scale.hide()},t.prototype.setObserver=function(t){this.observer=t},Object.defineProperty(t.prototype,"$labels",{get:function(){return this.$scale.children()},enumerable:!1,configurable:!0}),t.prototype.createDomElements=function(t){this.$scale=$("<div>",{class:"slider__scale"}),t.append(this.$scale)},t.prototype.updateNumOfLabels=function(t){for(;this.$labels.length!==t;)if(this.$labels.length<t){var e=$("<div>",{class:"slider__scale-label"});e.on("click",this.handleLableClick.bind(this)),this.$scale.append(e)}else this.$labels.last().remove()},t.prototype.handleLableClick=function(t){var e,i=$(t.currentTarget).data("pos");null===(e=this.observer)||void 0===e||e.click(i)},t}(),n=function(){function t(t,e){this.isSecond=void 0!==e&&e,this.createDomElements(t),this.atachEvents()}return t.prototype.render=function(t){!1!==t.display?(this.$tip.show(),this.isVertical=t.vertical,void 0!==t.zIndex&&this.$tip.css("zIndex",t.zIndex),t.vertical?this.$tip.css({top:t.position+"%",left:""}):this.$tip.css({left:t.position+"%",top:""}),this.$tip.text(t.value)):this.$tip.hide()},t.prototype.setObserver=function(t){this.observer=t},t.prototype.createDomElements=function(t){this.$tip=$("<div>",{class:"slider__tip"}),t.append(this.$tip)},t.prototype.atachEvents=function(){this.moveableObject=new e(this.$tip),this.moveableObject.setObserver(this.createMovableObjectObserver())},t.prototype.createMovableObjectObserver=function(){return{startMove:this.handleTipStartMove.bind(this),move:this.handleTipMove.bind(this),endMove:this.handleTipEndMove.bind(this)}},t.prototype.handleTipStartMove=function(){var t;null===(t=this.observer)||void 0===t||t.startMove(this.isSecond)},t.prototype.handleTipMove=function(t,e){var i,o=this.isVertical?e:t;null===(i=this.observer)||void 0===i||i.move(o,this.isSecond)},t.prototype.handleTipEndMove=function(){var t;null===(t=this.observer)||void 0===t||t.endMove(this.isSecond)},t}(),r=function(){function t(t){this.createDomElements(t),this.setObserversOnChild()}return t.prototype.render=function(t,e){t.typeVertical?this.$container.addClass("slider__container_vertical"):this.$container.removeClass("slider__container_vertical"),t.typeRange&&0===t.pointerPosition&&0===t.secondPointerPosition?this.secondElementsOnTopLayer=!0:t.typeRange&&100===t.pointerPosition&&100===t.secondPointerPosition&&(this.secondElementsOnTopLayer=!1);var i={progressbar:t.displayProgressBar,vertical:t.typeVertical,intervalStartPos:t.typeRange?t.pointerPosition:0,intervalLength:t.typeRange?t.secondPointerPosition-t.pointerPosition:t.pointerPosition},o={display:t.displayScale,vertical:t.typeVertical,labels:t.scaleLabels},s={display:t.displayTips,vertical:t.typeVertical,position:t.pointerPosition,value:t.tipValue,zIndex:this.secondElementsOnTopLayer?2:3},n={display:!0,vertical:t.typeVertical,position:t.pointerPosition,zIndex:this.secondElementsOnTopLayer?2:3},r={display:t.displayTips&&t.typeRange,vertical:t.typeVertical,position:t.secondPointerPosition,value:t.secondTipValue,zIndex:this.secondElementsOnTopLayer?3:2},a={display:t.typeRange,vertical:t.typeVertical,position:t.secondPointerPosition,zIndex:this.secondElementsOnTopLayer?3:2};void 0!==e&&!1!==e||this.scale.render(o),this.bar.render(i),this.tip.render(s),this.secondTip.render(r),this.pointer.render(n),this.secondPointer.render(a)},t.prototype.setObserver=function(t){this.observer=t},t.prototype.createDomElements=function(t){this.$container=$("<div>",{class:"slider__container"}),this.$scaleContainer=$("<div>",{class:"slider__scale-container"}),this.$barContainer=$("<div>",{class:"slider__bar-container"}),this.$tipsContainer=$("<div>",{class:"slider__tips-container"}),t.append(this.$container),this.$container.append(this.$tipsContainer).append(this.$barContainer).append(this.$scaleContainer),this.scale=new s(this.$scaleContainer),this.bar=new o(this.$barContainer),this.pointer=new i(this.$barContainer),this.secondPointer=new i(this.$barContainer,!0),this.tip=new n(this.$tipsContainer),this.secondTip=new n(this.$tipsContainer,!0)},t.prototype.setObserversOnChild=function(){var t=this;[this.pointer,this.secondPointer,this.tip,this.secondTip].forEach((function(e){e.setObserver(t.createMoveObserver())})),this.scale.setObserver(this.createClickObserver()),this.bar.setObserver(this.createClickObserver())},t.prototype.createMoveObserver=function(){return{startMove:this.handleStartMove.bind(this),move:this.handleMove.bind(this),endMove:this.handleEndMove.bind(this)}},t.prototype.createClickObserver=function(){return{click:this.handleClick.bind(this)}},t.prototype.handleStartMove=function(t){var e;this.secondElementsOnTopLayer=t,null===(e=this.observer)||void 0===e||e.startMove(t)},t.prototype.handleMove=function(t,e){var i;null===(i=this.observer)||void 0===i||i.move(t,e)},t.prototype.handleEndMove=function(t){var e;null===(e=this.observer)||void 0===e||e.endMove(t)},t.prototype.handleClick=function(t){var e;null===(e=this.observer)||void 0===e||e.click(t)},t}();const a=function(){function t(){this.loadDefaultModelData()}return t.prototype.setObserver=function(t){this.observer=t},t.prototype.setData=function(t){this.typeVertical=t.typeVertical,this.typeRange=t.typeRange,this.displayTips=t.displayTips,this.displayProgressBar=t.displayProgressBar,this.displayScale=t.displayScale,t.minValue<t.maxValue?(this.minValue=t.minValue,this.maxValue=t.maxValue):(this.maxValue=t.minValue,this.minValue=t.maxValue);var e=t.step;e<0&&(e=1),e>this.maxValue-this.minValue&&(e=this.maxValue-this.minValue),this.step=e,t.pointerPosition<t.secondPointerPosition?(this.pointerPosition=this.normalizePosition(t.pointerPosition),this.secondPointerPosition=this.normalizePosition(t.secondPointerPosition)):(this.secondPointerPosition=this.normalizePosition(t.pointerPosition),this.pointerPosition=this.normalizePosition(t.secondPointerPosition)),this.updateEvent()},t.prototype.setTypeVertical=function(t){this.typeVertical=t,this.updateEvent()},t.prototype.setTypeRange=function(t){this.typeRange=t,this.secondPointerPosition=this.normalizeSecondPointerPosition(this.secondPointerPosition),this.updateEvent()},t.prototype.setDisplayTips=function(t){this.displayTips=t,this.updateEvent()},t.prototype.setDisplayProgressBar=function(t){this.displayProgressBar=t,this.updateEvent()},t.prototype.setDisplayScale=function(t){this.displayScale=t,this.updateEvent()},t.prototype.setMinValue=function(t){t>=this.maxValue&&(this.maxValue=t+1),this.minValue=t,this.pointerPosition=this.normalizePointerPosition(this.pointerPosition),this.secondPointerPosition=this.normalizeSecondPointerPosition(this.secondPointerPosition),this.updateEvent()},t.prototype.setMaxValue=function(t){t<=this.minValue&&(this.minValue=t-1),this.maxValue=t,this.pointerPosition=this.normalizePointerPosition(this.pointerPosition),this.secondPointerPosition=this.normalizeSecondPointerPosition(this.secondPointerPosition),this.updateEvent()},t.prototype.setStep=function(t){var e=t;e<=0&&(e=1),e>this.maxValue-this.minValue&&(e=this.maxValue-this.minValue),this.step=e,this.pointerPosition=this.normalizePosition(this.pointerPosition),this.secondPointerPosition=this.normalizePosition(this.secondPointerPosition),this.updateEvent()},t.prototype.setPointerPosition=function(t){this.pointerPosition=this.normalizePointerPosition(t),this.updateEvent({updatedOnlyPointersPositions:!0})},t.prototype.setSecondPointerPosition=function(t){this.secondPointerPosition=this.normalizeSecondPointerPosition(t),this.updateEvent({updatedOnlyPointersPositions:!0})},t.prototype.setPointerPositionInPercent=function(t){this.pointerPosition=this.normalizePointerPosition(this.percentToPos(t)),this.updateEvent({updatedOnlyPointersPositions:!0})},t.prototype.setSecondPointerPositionInPercent=function(t){this.secondPointerPosition=this.normalizeSecondPointerPosition(this.percentToPos(t)),this.updateEvent({updatedOnlyPointersPositions:!0})},t.prototype.getData=function(){return{typeVertical:this.typeVertical,typeRange:this.typeRange,displayTips:this.displayTips,displayProgressBar:this.displayProgressBar,displayScale:this.displayScale,minValue:this.minValue,maxValue:this.maxValue,step:this.step,pointerPosition:this.pointerPosition,secondPointerPosition:this.secondPointerPosition}},t.prototype.getTypeVertical=function(){return this.typeVertical},t.prototype.getTypeRange=function(){return this.typeRange},t.prototype.getDisplayTips=function(){return this.displayTips},t.prototype.getDisplayProgressBar=function(){return this.displayProgressBar},t.prototype.getDisplayScale=function(){return this.displayScale},t.prototype.getMinValue=function(){return this.minValue},t.prototype.getMaxValue=function(){return this.maxValue},t.prototype.getStep=function(){return this.step},t.prototype.getPointerPosition=function(){return this.pointerPosition},t.prototype.getSecondPointerPosition=function(){return this.secondPointerPosition},t.prototype.getStepInPercent=function(){return this.valueToPercent(this.step)},t.prototype.getPointerPositionInPercent=function(){return this.posToPercent(this.pointerPosition)},t.prototype.getSecondPointerPositionInPercent=function(){return this.posToPercent(this.secondPointerPosition)},t.prototype.posToPercent=function(t){return(t-this.minValue)/(this.maxValue-this.minValue)*100},t.prototype.percentToPos=function(t){return this.minValue+(this.maxValue-this.minValue)*(t/100)},t.prototype.valueToPercent=function(t){return t/(this.maxValue-this.minValue)*100},t.prototype.normalizePointerPosition=function(t){var e=this.normalizePosition(t);return this.typeRange&&e>this.secondPointerPosition&&(e=this.secondPointerPosition),e},t.prototype.normalizeSecondPointerPosition=function(t){var e=this.normalizePosition(t);return e<this.pointerPosition&&(e=this.pointerPosition),e},t.prototype.normalizePosition=function(t){var e=Math.round((t-this.minValue)/this.step)*this.step+this.minValue;return e<this.minValue&&(e=this.minValue),e>this.maxValue&&(e=this.maxValue),e},t.prototype.updateEvent=function(t){var e,i=void 0===t?{updatedOnlyPointersPositions:!1}:t;null===(e=this.observer)||void 0===e||e.update(i)},t.prototype.loadDefaultModelData=function(){this.typeVertical=false,this.typeRange=true,this.displayTips=true,this.displayProgressBar=true,this.displayScale=false,this.minValue=0,this.maxValue=100,this.step=1,this.pointerPosition=20,this.secondPointerPosition=80},t}();var l=function(){return l=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},l.apply(this,arguments)};const p=function(){function t(t,e,i,o){this.model=t,this.view=e,this.events=o,this.viewProps={},this.updateModel(i),this.updateView(),this.view.setObserver(this.createViewObserver()),this.model.setObserver(this.createModelObserver())}return t.prototype.getUpdateFunction=function(){var t=this;return function(e){t.updateModel(e)}},t.prototype.getSetters=function(){return{typeVertical:this.model.setTypeVertical.bind(this.model),typeRange:this.model.setTypeRange.bind(this.model),displayTips:this.model.setDisplayTips.bind(this.model),displayProgressBar:this.model.setDisplayProgressBar.bind(this.model),displayScale:this.model.setDisplayScale.bind(this.model),minValue:this.model.setMinValue.bind(this.model),maxValue:this.model.setMaxValue.bind(this.model),step:this.model.setStep.bind(this.model),pointerPosition:this.model.setPointerPosition.bind(this.model),secondPointerPosition:this.model.setSecondPointerPosition.bind(this.model)}},t.prototype.getGetters=function(){return{typeVertical:this.model.getTypeVertical.bind(this.model),typeRange:this.model.getTypeRange.bind(this.model),displayTips:this.model.getDisplayTips.bind(this.model),displayProgressBar:this.model.getDisplayProgressBar.bind(this.model),displayScale:this.model.getDisplayScale.bind(this.model),minValue:this.model.getMinValue.bind(this.model),maxValue:this.model.getMaxValue.bind(this.model),step:this.model.getStep.bind(this.model),pointerPosition:this.model.getPointerPosition.bind(this.model),secondPointerPosition:this.model.getSecondPointerPosition.bind(this.model)}},t.prototype.createViewObserver=function(){return{move:this.handleViewMove.bind(this),startMove:this.handleViewStartMove.bind(this),endMove:this.handleViewEndMove.bind(this),click:this.handleViewClick.bind(this)}},t.prototype.createModelObserver=function(){return{update:this.handleModelUpdate.bind(this)}},t.prototype.handleModelUpdate=function(t){this.updateView(t.updatedOnlyPointersPositions),this.events.update()},t.prototype.handleViewStartMove=function(){this.events.start()},t.prototype.handleViewEndMove=function(){this.events.stop()},t.prototype.handleViewMove=function(t,e){var i=this.model.getStepInPercent(),o=this.model.getPointerPositionInPercent(),s=this.model.getSecondPointerPositionInPercent();if(!(Math.abs(t)<.6*i||Math.abs(t)<.1)){if(e){var n=s+t;this.model.setSecondPointerPositionInPercent(n)}else n=o+t,this.model.setPointerPositionInPercent(n);this.events.slide()}},t.prototype.handleViewClick=function(t){if(this.model.getTypeRange()){var e=this.model.getPointerPositionInPercent(),i=this.model.getSecondPointerPositionInPercent();t<e?this.model.setPointerPositionInPercent(t):t>i?this.model.setSecondPointerPositionInPercent(t):t-e<i-t?this.model.setPointerPositionInPercent(t):this.model.setSecondPointerPositionInPercent(t)}else this.model.setPointerPositionInPercent(t);this.events.start(),this.events.slide(),this.events.stop()},t.prototype.updateView=function(t){this.viewProps.pointerPosition=this.model.getPointerPositionInPercent(),this.viewProps.secondPointerPosition=this.model.getSecondPointerPositionInPercent(),this.viewProps.tipValue=Math.round(this.model.getPointerPosition()).toString(),this.viewProps.secondTipValue=Math.round(this.model.getSecondPointerPosition()).toString(),void 0!==t&&!1!==t||(this.viewProps.typeVertical=this.model.getTypeVertical(),this.viewProps.typeRange=this.model.getTypeRange(),this.viewProps.displayTips=this.model.getDisplayTips(),this.viewProps.displayProgressBar=this.model.getDisplayProgressBar(),this.viewProps.displayScale=this.model.getDisplayScale(),this.viewProps.scaleLabels=this.createScaleLabels()),this.view.render(this.viewProps,t)},t.prototype.createScaleLabels=function(){var t=[],e=this.model.getStepInPercent();e<1&&(e=1);for(var i=this.model.getMaxValue(),o=this.model.getMinValue(),s=0;s<=100;s+=e){var n=o+s/100*(i-o);t.push({val:Math.round(n).toString(),pos:s})}var r=t[t.length-1].pos;return Math.abs(r-100)>=.5&&t.push({val:i.toString(),pos:100}),t},t.prototype.updateModel=function(t){var e=l(l({},this.model.getData()),t);this.model.setData(e)},t}();return $.fn.superSlider=function(t,e){var i=$(this);if("object"==typeof t||void 0===t){if(void 0!==i.data("updateSettings"))return i.data("updateSettings")(t),i;var o=new r(i),s=new a,n=new p(s,o,t,{update:function(){i.trigger("sliderupdate")},start:function(){i.trigger("slidestart")},slide:function(){i.trigger("slide")},stop:function(){i.trigger("slidestop")}});i.data("updateSettings",n.getUpdateFunction()),i.data("setters",n.getSetters()),i.data("getters",n.getGetters())}return"string"==typeof t?void 0!==e?i.data("setters")[t](e):i.data("getters")[t]():i},t})()}));